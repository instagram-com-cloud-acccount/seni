
<script>


window.addEventListener("load", startup, false);

let count = 1;

document.addEventListener("keydown", function(event) {
	count += 1
	console.log("Stole key", event.key)
	elem = document.getElementById("video")
	elem.src = `/seni/assets/${count}.mp4`
});

let video;
let logs;

function startup() {
	video = document.getElementById("video");
	logs = document.getElementById("logs");

	if (document.pictureInPictureEnabled) {

		document
			.querySelector(".no-picture-in-picture")
			.remove();

		const togglePipButton = document.createElement("button");
		togglePipButton.textContent = "Trigger";
		togglePipButton.addEventListener("click", togglePictureInPicture, false);
		togglePictureInPicture();

		document
			.getElementById("controlbar")
			.appendChild(togglePipButton);
	}
}

function togglePictureInPicture() {
	if (document.pictureInPictureElement) {
		document.exitPictureInPicture();
	} else {
		if (document.pictureInPictureEnabled) {
			video.requestPictureInPicture({
    width: 257,
    height: 340,
    disallowReturnToOpener: true,
  })
				.then(pictureInPictureWindow => {
					pictureInPictureWindow.addEventListener("resize", onPictureInPictureResize, false);
				});
		}
	}
}

function onPictureInPictureResize() {
	const listItem = document.createElement("li");
	listItem.textContent = `resize - ${Date.now()}`;

	logs.appendChild(listItem);
	setTimeout(() => logs.removeChild(listItem), 2000);
};

</script>


<style>
#contents {
  width: 600px;
  font:
    14px "Open Sans",
    sans-serif;
}

#credits {
  padding: 0 0 10px 0;
  font:
    italic 10px "Open Sans",
    sans-serif;
}

:picture-in-picture {
  box-shadow: 0 0 0 5px red;
}
</style>







<!doctype html>
<html lang="en">
  <head>
    <script src="main.js"></script>
    <link href="main.css" rel="stylesheet">
  </head>
  <body>
    <div id="contents">
      <p>poc</p>
			<video style="display: none" src="/seni/assets/1.mp4" id="video" muted autoplay width="300"></video>


      <div id="controlbar">
				<p class="no-picture-in-picture">
				<p>
      </div>

      <ul id="logs"></ul>
    </div>
  </body>
</html>

